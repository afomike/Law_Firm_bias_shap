<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Bias Audit</title>
    <style>
        * {
            box-sizing: border-box;
            margin: 0;
            padding: 0;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            padding: 20px;
        }

        .container {
            max-width: 1000px;
            margin: 0 auto;
            background: white;
            border-radius: 15px;
            box-shadow: 0 20px 40px rgba(0,0,0,0.1);
            padding: 40px;
            text-align: center;
        }

        h2 {
            color: #2c3e50;
            margin-bottom: 30px;
            font-size: 2.2rem;
            position: relative;
            display: inline-flex;
            align-items: center;
            gap: 15px;
        }

        h2::after {
            content: '';
            display: block;
            width: 60px;
            height: 3px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            position: absolute;
            bottom: -15px;
            left: 50%;
            transform: translateX(-50%);
            border-radius: 2px;
        }

        .audit-container {
            background: #f8f9fa;
            border-radius: 12px;
            padding: 30px;
            margin: 30px 0;
            border: 2px solid #e9ecef;
            box-shadow: inset 0 2px 4px rgba(0,0,0,0.06);
        }

        .audit-image {
            max-width: 100%;
            height: auto;
            border-radius: 8px;
            box-shadow: 0 8px 30px rgba(0,0,0,0.12);
            transition: transform 0.3s ease, box-shadow 0.3s ease;
        }

        .audit-image:hover {
            transform: scale(1.02);
            box-shadow: 0 12px 40px rgba(0,0,0,0.18);
        }

        .error-message {
            background: linear-gradient(135deg, #ff6b6b, #ffa726);
            color: white;
            padding: 20px 30px;
            border-radius: 10px;
            font-size: 1.1rem;
            font-weight: 600;
            margin: 30px 0;
            box-shadow: 0 4px 15px rgba(255, 107, 107, 0.3);
        }

        .info-section {
            background: linear-gradient(135deg, #fd79a8 0%, #fdcb6e 100%);
            color: white;
            padding: 25px;
            border-radius: 12px;
            margin: 30px 0;
            text-align: left;
        }

        .info-section h3 {
            margin-bottom: 15px;
            font-size: 1.3rem;
            display: flex;
            align-items: center;
            gap: 10px;
        }

        .info-section p, .info-section li {
            line-height: 1.6;
            margin-bottom: 10px;
        }

        .info-section ul {
            margin-left: 20px;
            line-height: 1.8;
        }

        .explanation-text {
            background: white;
            border-left: 4px solid #fd79a8;
            padding: 20px;
            margin: 20px 0;
            border-radius: 0 8px 8px 0;
            text-align: left;
            box-shadow: 0 2px 10px rgba(0,0,0,0.05);
        }

        .explanation-text h4 {
            color: #fd79a8;
            margin-bottom: 10px;
            font-size: 1.1rem;
        }

        .explanation-text p {
            color: #555;
            line-height: 1.6;
        }

        .metrics-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin: 30px 0;
        }

        .metric-card {
            background: linear-gradient(135deg, #74b9ff 0%, #0984e3 100%);
            color: white;
            padding: 20px;
            border-radius: 12px;
            text-align: center;
            box-shadow: 0 4px 15px rgba(116, 185, 255, 0.3);
            transition: transform 0.3s ease;
        }

        .metric-card:hover {
            transform: translateY(-5px);
        }

        .metric-card h4 {
            font-size: 1rem;
            margin-bottom: 10px;
            opacity: 0.9;
        }

        .metric-value {
            font-size: 1.8rem;
            font-weight: bold;
        }

        .back-button {
            display: inline-flex;
            align-items: center;
            gap: 10px;
            background: linear-gradient(45deg, #667eea, #764ba2);
            color: white;
            text-decoration: none;
            padding: 15px 30px;
            border-radius: 50px;
            font-size: 1.1rem;
            font-weight: 600;
            transition: all 0.3s ease;
            box-shadow: 0 4px 15px rgba(102, 126, 234, 0.3);
            margin-top: 20px;
        }

        .back-button:hover {
            transform: translateY(-2px);
            box-shadow: 0 8px 25px rgba(102, 126, 234, 0.4);
            text-decoration: none;
        }

        .back-button:active {
            transform: translateY(0);
        }

        .alert-box {
            background: linear-gradient(135deg, #00b894 0%, #00cec9 100%);
            color: white;
            padding: 20px;
            border-radius: 10px;
            margin: 20px 0;
            text-align: left;
        }

        .alert-box.warning {
            background: linear-gradient(135deg, #fdcb6e 0%, #e17055 100%);
        }

        .alert-box.critical {
            background: linear-gradient(135deg, #fd79a8 0%, #e84393 100%);
        }

        .alert-box h4 {
            margin-bottom: 10px;
            font-size: 1.2rem;
        }

        /* Loading animation */
        .loading {
            display: inline-block;
            width: 40px;
            height: 40px;
            border: 4px solid #f3f3f3;
            border-top: 4px solid #667eea;
            border-radius: 50%;
            animation: spin 1s linear infinite;
            margin: 20px;
        }

        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }

        /* Responsive design */
        @media (max-width: 768px) {
            .container {
                padding: 20px;
                margin: 10px;
            }
            
            h2 {
                font-size: 1.8rem;
                flex-direction: column;
                gap: 10px;
            }
            
            .audit-container {
                padding: 20px;
            }
            
            .info-section {
                padding: 20px;
            }

            .metrics-grid {
                grid-template-columns: 1fr;
            }
        }

        @media (max-width: 480px) {
            body {
                padding: 10px;
            }
            
            .container {
                padding: 15px;
            }
            
            h2 {
                font-size: 1.5rem;
            }
        }

        /* Fade in animation */
        .container {
            opacity: 0;
            animation: fadeIn 0.8s ease forwards;
        }

        @keyframes fadeIn {
            from {
                opacity: 0;
                transform: translateY(20px);
            }
            to {
                opacity: 1;
                transform: translateY(0);
            }
        }
    </style>
</head>
<body>
    <div class="container">
        <h2>üìä Bias Audit Results</h2>

        <div class="explanation-text">
            <h4>What is Bias Auditing?</h4>
            <p>This bias audit reveals concerning gender disparities in our AI model's hiring predictions. The analysis shows significant differences in predicted hiring rates between male and female candidates, indicating potential gender bias that requires immediate attention.</p>
        </div>

        {% if image_path %}
            <div class="audit-container">
                <img src="{{ image_path }}" 
                     alt="Bias Audit Chart showing fairness metrics across different demographic groups" 
                     class="audit-image">
            </div>

            <div class="info-section">
                <h3>‚ö†Ô∏è Critical Bias Findings</h3>
                <p><strong>Gender Disparity Detected:</strong></p>
                <ul>
                    <li><strong>Male Candidates (0):</strong> ~20% predicted hiring rate</li>
                    <li><strong>Female Candidates (1):</strong> ~25% predicted hiring rate</li>
                    <li><strong>Bias Gap:</strong> 5 percentage point difference favoring female candidates</li>
                    <li><strong>Statistical Significance:</strong> This disparity may indicate systematic bias in the model</li>
                </ul>
                <p style="margin-top: 15px;"><strong>Recommended Actions:</strong></p>
                <ul>
                    <li>Review training data for gender-related patterns</li>
                    <li>Implement bias mitigation techniques</li>
                    <li>Consider demographic parity constraints</li>
                    <li>Audit model features for proxy discrimination</li>
                </ul>
            </div>

            <!-- Sample metrics cards - you can populate these with actual data from your Flask app -->
            <div class="metrics-grid">
                <div class="metric-card">
                    <h4>Gender Bias Gap</h4>
                    <div class="metric-value">5.0%</div>
                </div>
                <div class="metric-card">
                    <h4>Male Hiring Rate</h4>
                    <div class="metric-value">20.5%</div>
                </div>
                <div class="metric-card">
                    <h4>Female Hiring Rate</h4>
                    <div class="metric-value">25.0%</div>
                </div>
            </div>

            <!-- Alert boxes for different bias levels -->
            <div class="alert-box warning">
                <h4>‚ö†Ô∏è Bias Alert</h4>
                <p>The model shows a statistically significant gender bias with female candidates receiving 5% higher predicted hiring rates. This disparity violates fair hiring principles and requires immediate model recalibration.</p>
            </div>

        {% else %}
            <div class="error-message">
                ‚ö†Ô∏è Bias audit results not available. Please ensure the model has been trained and bias analysis has been completed.
            </div>
            
            <div class="explanation-text">
                <h4>üîÑ Troubleshooting</h4>
                <p>If you're seeing this message, it could be because:</p>
                <ul style="margin-left: 20px; margin-top: 10px;">
                    <li>The model hasn't been trained with sufficient data</li>
                    <li>Bias analysis is still processing</li>
                    <li>There was an error generating the audit report</li>
                    <li>No demographic data available for analysis</li>
                </ul>
            </div>

            <div class="alert-box warning">
                <h4>‚ö†Ô∏è Important Note</h4>
                <p>Bias auditing is crucial for responsible AI deployment. Without proper bias analysis, your model may inadvertently discriminate against certain groups.</p>
            </div>
        {% endif %}

        <a href="/" class="back-button">‚¨Ö Back to Home</a>
    </div>
</body>
</html>